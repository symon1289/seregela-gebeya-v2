import{u as p,r as a,a as C,b as L,j as s,C as N,c as w,P as S,d as y,e as P,g as R}from"./index-DQ33XCid.js";const E=()=>{const{t:d}=p(),n=a.useRef(null),o=a.useRef(0),{user:u}=C(e=>e.auth),[m,h]=a.useState(!1),[g,x]=a.useState(!1),{filteredProducts:r,loadMore:b,hasMore:v,isLoading:j,isFetchingNextPage:l}=L({id:111,endpoint:"subcategories",initialItemsToLoad:14});a.useEffect(()=>{if(r.length>o.current&&o.current!==0){const e=o.current;o.current=r.length,requestAnimationFrame(()=>{const t=n.current;if(t){const c=t.children[e];c&&c.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}})}else o.current=r.length},[r]);const f=e=>{const t=n.current;t&&t.scrollBy({left:e==="left"?-200:200,behavior:"smooth"})},i=()=>{const e=n.current;e&&(h(e.scrollLeft>0),x(e.scrollLeft+e.clientWidth<e.scrollWidth))};return a.useEffect(()=>{i();const e=n.current;return e&&e.addEventListener("scroll",i),()=>{e&&e.removeEventListener("scroll",i)}},[r]),s.jsxs("section",{className:"mb-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl leading-[19px] font-semibold",children:d("fresh_savers")}),!l&&v&&s.jsx("button",{"aria-label":"Load More",onClick:b,className:"bg-[#e9a83a] hover:bg-[#fed874] text-white text-sm sm:text-base transition-colors py-2 px-4 rounded-lg font-semibold",children:d("loadMore")}),l&&s.jsx("div",{className:"flex justify-center ",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#e9a83a]"})})]}),s.jsxs("div",{className:"relative",children:[m&&s.jsx("button",{"aria-label":"Left",onClick:()=>f("left"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded-full p-2 shadow-md z-10",children:s.jsx(N,{})}),g&&s.jsx("button",{"aria-label":"Right",onClick:()=>f("right"),className:"absolute right-0 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded-full p-2 shadow-md z-10",children:s.jsx(w,{})}),s.jsx("div",{ref:n,className:"grid auto-cols-[10.5rem] grid-flow-col gap-3 overflow-x-auto row-span-2 grid-rows-2",children:l||j?Array.from({length:14}).map((e,t)=>s.jsx(S,{},t)):r.map(e=>s.jsx(y,{id:e.id,name:e.name,price:e.price,image:e.image||P,originalPrice:e.originalPrice,discount:e.discount?Number(e.discount):void 0,left_in_stock:R(u,e)??0},e.id))})]})]})};export{E as default};
