import{u as j,r,a as p,j as s,C,b as N,P as L,c as w,d as y}from"./index-BBCkqH49.js";const S=()=>{const{t:d}=j(),o=r.useRef(null),n=r.useRef(0),[u,m]=r.useState(!1),[h,g]=r.useState(!1),{filteredProducts:a,loadMore:x,hasMore:b,isLoading:v,isFetchingNextPage:l}=p({id:111,endpoint:"subcategories",initialItemsToLoad:14});r.useEffect(()=>{if(a.length>n.current){const e=n.current;n.current=a.length,requestAnimationFrame(()=>{const t=o.current;if(t){const c=t.children[e];c&&c.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}})}},[a]);const f=e=>{const t=o.current;t&&t.scrollBy({left:e==="left"?-200:200,behavior:"smooth"})},i=()=>{const e=o.current;e&&(m(e.scrollLeft>0),g(e.scrollLeft+e.clientWidth<e.scrollWidth))};return r.useEffect(()=>{i();const e=o.current;return e&&e.addEventListener("scroll",i),()=>{e&&e.removeEventListener("scroll",i)}},[a]),s.jsxs("section",{className:"mb-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl leading-[19px] font-semibold",children:d("fresh_savers")}),!l&&b&&s.jsx("button",{"aria-label":"Load More",onClick:x,className:"bg-[#e9a83a] hover:bg-[#fed874] text-white text-sm sm:text-base transition-colors py-2 px-4 rounded-lg font-semibold",children:d("loadMore")}),l&&s.jsx("div",{className:"flex justify-center ",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#e9a83a]"})})]}),s.jsxs("div",{className:"relative",children:[u&&s.jsx("button",{"aria-label":"Left",onClick:()=>f("left"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded-full p-2 shadow-md z-10",children:s.jsx(C,{})}),h&&s.jsx("button",{"aria-label":"Right",onClick:()=>f("right"),className:"absolute right-0 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded-full p-2 shadow-md z-10",children:s.jsx(N,{})}),s.jsx("div",{ref:o,className:"grid auto-cols-[10.5rem] grid-flow-col gap-3 overflow-x-auto row-span-2 grid-rows-2",children:l||v?Array.from({length:14}).map((e,t)=>s.jsx(L,{},t)):a.map(e=>s.jsx(w,{id:e.id,name:e.name,price:e.price,image:e.image||y,originalPrice:e.price,discount:e.discount?Number(e.discount):void 0,left_in_stock:e.left_in_stock},e.id))})]})]})};export{S as default};
