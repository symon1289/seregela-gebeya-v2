import{u as j,r as n,a as p,j as t,C,b as N,P as y,c as L,d as _}from"./index-CA7h3JFQ.js";const P=()=>{const{t:d}=j(),a=n.useRef(null),o=n.useRef(0),[u,m]=n.useState(!1),[h,g]=n.useState(!1),{filteredProducts:r,loadMore:x,hasMore:b,isLoading:v,isFetchingNextPage:l}=p({id:111,endpoint:"subcategories",initialItemsToLoad:14});n.useEffect(()=>{if(r.length>o.current&&o.current!==0){const e=o.current;o.current=r.length,requestAnimationFrame(()=>{const s=a.current;if(s){const c=s.children[e];c&&c.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}})}else o.current=r.length},[r]);const f=e=>{const s=a.current;s&&s.scrollBy({left:e==="left"?-200:200,behavior:"smooth"})},i=()=>{const e=a.current;e&&(m(e.scrollLeft>0),g(e.scrollLeft+e.clientWidth<e.scrollWidth))};return n.useEffect(()=>{i();const e=a.current;return e&&e.addEventListener("scroll",i),()=>{e&&e.removeEventListener("scroll",i)}},[r]),t.jsxs("section",{className:"mb-0",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl sm:text-3xl leading-[19px] font-semibold",children:d("fresh_savers")}),!l&&b&&t.jsx("button",{"aria-label":"Load More",onClick:x,className:"bg-[#e9a83a] hover:bg-[#fed874] text-white text-sm sm:text-base transition-colors py-2 px-4 rounded-lg font-semibold",children:d("loadMore")}),l&&t.jsx("div",{className:"flex justify-center ",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#e9a83a]"})})]}),t.jsxs("div",{className:"relative",children:[u&&t.jsx("button",{"aria-label":"Left",onClick:()=>f("left"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded-full p-2 shadow-md z-10",children:t.jsx(C,{})}),h&&t.jsx("button",{"aria-label":"Right",onClick:()=>f("right"),className:"absolute right-0 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded-full p-2 shadow-md z-10",children:t.jsx(N,{})}),t.jsx("div",{ref:a,className:"grid auto-cols-[10.5rem] grid-flow-col gap-3 overflow-x-auto row-span-2 grid-rows-2",children:l||v?Array.from({length:14}).map((e,s)=>t.jsx(y,{},s)):r.map(e=>t.jsx(L,{id:e.id,name:e.name,price:e.price,image:e.image||_,originalPrice:e.originalPrice,discount:e.discount?Number(e.discount):void 0,left_in_stock:e.max_quantity_per_order!==null?e.max_quantity_per_order:e.left_in_stock},e.id))})]})]})};export{P as default};
